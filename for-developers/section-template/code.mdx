---
title: 'Code'
description: 'Learn about the core components of a section template'
---

# Template Code

Every section template in Glood.AI consists of several core files that work together to create a complete recommendation section. We use the [liquidJS](https://liquidjs.com/api/classes/Liquid.html) library to render Liquid code at the client side. For any queries regarding Liquid-specific data structures, filters, or tags, please refer to the [Shopify Liquid documentation](https://shopify.dev/docs/api/liquid/objects).

## Core Parts

### 1. Section Template

The main template that defines the HTML structure and dynamic content rendering. It uses data structures defined in the [Object Definitions](/for-developers/section-template/schemas#object-definitions).

#### Dynamic Implementation
- Uses [translations object](/for-developers/section-template/schemas#translations-object) for text content
- Accesses [glood object](/for-developers/section-template/schemas#glood-object) for store configuration
- Renders [product data](/for-developers/section-template/schemas#product-array) in templates
- Applies [template settings](/for-developers/section-template/schemas#template-object) for styling

#### Liquid Filters
Special filters used in the template:

| Filter | Purpose | Parameters | Input | Output | Example |
|--------|---------|------------|-------|--------|---------|
| `money` | Price formatting | `money_format` (optional): Override default format | Number/String | Formatted price | `19.99 \| money` â†’ `"$19.99"` |
| `optimize_image` | Image optimization | - `width` (optional): Desired width<br />- `height` (optional): Desired height<br />- `crop` (optional): Crop mode | URL | Optimized URL | `product.image \| optimize_image: width: 300, height: 300` |
| `tracking_url` | Add tracking | - `section` (required): Section context<br />- `ref_product_id` (optional): Reference product ID | Product | URL with params | `product \| tracking_url: section` |
| `section_discount` | Format discount | - `money_format` (optional): Price format<br />- `locale` (optional): Language code | Section | Discount string | `section \| section_discount: money_format: shop.money_format` |

### 2. JS Hooks

The JavaScript hooks system provides a powerful way to customize and extend section behavior. These hooks are called at specific points in the section's lifecycle, allowing you to implement custom functionality and handle various events.

#### Core callBacks available

| Method Name | Parameters | Description | Return | Default Value |
|-------------|------------|-------------|---------|---------------|
| `initSwiper` | `(Swiper, templateSettings, container, params, defaultSettings, utils)` | Initializes carousel functionality | `Swiper instance` | null |
| `onSectionInit` | `(args, cb, gloodUtils)` | Called when section initializes | `void` | null |
| `onSectionRenderComplete` | `(args, utils)` | Called after section rendering | `void` | null |
| `onVariantChange` | `(args, utils)` | Handles variant selection | `void` | null |
| `onSwatchChange` | `(args, utils)` | Handles swatch selection | `void` | null |
| `validateCartOperation` | `(payload, recommendation, utils)` | Validates cart operations | `{payload, error}` | null |
| `onCartOperationComplete` | `(args, utils)` | Called after cart operation | `void` | null |
| `onProductDataReceived` | `(args, utils)` | Handles product data | `void` | null |
| `getProductDetailsQuery` | `(recommendation, glood)` | Returns GraphQL query | `string` | "" |
| `transformProductData` | `(product, recommendation)` | Transforms product data | `object` | {} |
| `onSectionRendered` | `(section, products)` | Fired when section is fully rendered | `void` | null |
| `onProductClick` | `(section, products, productId)` | Fired when product is clicked | `void` | null |
| `onAddToCart` | `(section, products, items, response)` | Fired on successful cart addition | `void` | null |
| `onVariantSelected` | `(section, products, productId, variantId)` | Fired when variant is selected | `void` | null |

#### Example Implementation
```javascript
// Example: Carousel Initialization Hook
initSwiper: (Swiper, templateSettings, container, params) => {
    const carouselContainer = container.querySelector('._gai-crz-cnt');
    if (!carouselContainer) return;
    
    return new Swiper(carouselContainer, {
        slidesPerView: templateSettings.breakpoints.small.cardsPerView,
        spaceBetween: templateSettings.breakpoints.small.gutter
    });
}

// Example: Variant Change Hook
onVariantChange: (args, utils) => {
    const { variant, product, container } = args;
    const priceElement = container.querySelector('._gai-prod-prc');
    if (priceElement && variant.price) {
        priceElement.textContent = utils.formatMoney(variant.price);
    }
}
```

### 3. CSS Template

The CSS template system provides a flexible way to style your recommendation sections. It uses Liquid templating for dynamic styling based on section settings and configuration. Both section template and CSS template have access to the same template object. For a complete reference of available objects and their structure, see [Template Objects](/for-developers/section-template/schemas#object-definitions).

#### Structure and Organization
The CSS is organized by components and breakpoints:
- Base styles for mobile-first approach
- Tablet styles (min-width: 768px)
- Desktop styles (min-width: 1024px)

**NOTE:** These breakpoint values are customizable through the template settings. For detailed configuration options, see [`settings.breakpoints[].screenSize`](/for-developers/section-template/schemas#template-object) in the Template Object documentation.

#### CSS Class Reference

| Class Name | Purpose | Properties Controlled | Example Usage |
|------------|---------|---------------------|---------------|
| `._gai-grid` | Main product grid container | - Grid layout (`grid-template-columns`)<br />- Gap between items<br />- Responsive columns | Controls overall product grid layout |
| `._gai-sec-tit` | Section title styling | - Font size<br />- Text alignment<br />- Line clamping<br />- Display properties | Main section heading appearance |
| `._gai-prod-card` | Individual product card | - Background color<br />- Font family<br />- Layout structure | Container for each product |
| `._gai-prod-img` | Product image container | - Aspect ratio<br />- Object-fit<br />- Width/height | Product image display |
| `._gai-prod-tit` | Product title | - Font size<br />- Line clamping<br />- Text alignment<br />- Font weight | Product name styling |
| `._gai-prod-vndr` | Vendor name | - Font size<br />- Display properties<br />- Position | Brand/vendor name display |
| `._gai-prod-prc` | Product price | - Color<br />- Font family<br />- Font size | Main price display |
| `._gai-prod-prc--original` | Compare-at price | - Color<br />- Display<br />- Text decoration | Original/compare price styling |
| `._gai-atc-btn` | Add to cart button | - Background color<br />- Text color<br />- Border radius<br />- Hover states | Add to cart button styling |
| `._gai-dis-cnt` | Discount container | - Justification<br />- Background<br />- Display properties | Discount information wrapper |
| `._gai-dis-txt` | Discount text | - Color<br />- Font size<br />- Text alignment | Discount amount/percentage text |
| `._gai-dis` | Discount badge | - Background color<br />- Text color<br />- Opacity<br />- Position | Discount label styling |

#### Label Classes
Special classes for product status and badges:

| Class Name | Purpose | Customizable Properties |
|------------|---------|------------------------|
| `._gai-oos` | Out of stock badge | Background/text colors |
| `._gai-bestseller` | Bestseller badge | Background/text colors |
| `._gai-new` | New product badge | Background/text colors |
| `._gai-trending` | Trending item badge | Background/text colors |

#### Responsive Behavior
The file includes media queries for different screen sizes:
```scss
/* Mobile (default) */
[data-gai-section-id="{{ section_id }}"] ._gai-grid {
  grid-template-columns: repeat({{- settings.breakpoints.small.cards_per_view -}}, 1fr);
  gap: {{ settings.breakpoints.small.gutter }}px;
}

/* Tablet */
@media (min-width: {{ settings.breakpoints.medium.screen_size }}px) {
  /* Tablet-specific styles */
}

/* Desktop */
@media (min-width: {{ settings.breakpoints.large.screen_size }}px) {
  /* Desktop-specific styles */
}
```

## Support

For help with template customization or troubleshooting, contact our support team at support@glood.ai 